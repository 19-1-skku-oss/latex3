%
% Copyright (C) 2015 Joseph Wright
%

\documentclass{article}
\input{regression-test}
\START
\AUTHOR{Joseph Wright}

% Load all of the dependencies of siunitx without logging
\OMIT
\usepackage{expl3}
\usepackage[log-declarations = false]{xparse}
\usepackage{l3keys2e}
\usepackage{array}
\usepackage{amstext}
\IfFileExists{translator.sty}
  {\usepackage{translator}}
  {}
\TIMO

% Disable appearance of registers in the log
\OMIT
\let\realwlog\wlog
\def\wlog#1{}
\TIMO

\usepackage{siunitx}

% Restore \wlog
\OMIT
\let\wlog\realwlog
\TIMO

% Avoid the start-of-document stuff which is engine-dependent
\OMIT
\begin{document}
\TIMO

\showoutput

% Force upTeX to do its extra font loading:
% avoid needing an additional .tlg file
\OMIT
\SI{10}{\joule\per\mole\per\kelvin}
\TIMO

\SI{10}{\joule\per\mole\per\kelvin}
$\SI{10}{\joule\per\mole\per\kelvin}$
$\SI{10}{J.mol^{-1}.k^{-1}}$
\SI[mode = text]{10}{\joule\per\mole\per\kelvin}

\begin{tabular}{SS[table-format = 2.2]}
12.34 & 12.34 \\
 5.67 &  5.67 \\
\end{tabular}

\end{document}
