%
% Copyright (C) 2018 The LaTeX3 Project
%

\documentclass{minimal}
\input{regression-test}

\RequirePackage[check-declarations]{expl3}
\ExplSyntaxOn
\debug_on:n { deprecation }
\ExplSyntaxOff

\AUTHOR{Joseph Wright}
\RequirePackage{l3draw}

\ExplSyntaxOn

\START

\TESTEXP { \draw_point_coord:nn }
  {
    \draw_point_coord:nn { 2pt + 3cm } { 3cm }
    \NEWLINE
    \draw_point_coord:nn { 10pt } { 1cm }
    \NEWLINE
    \draw_point_coord:nn { 10 } { 1 }
    \NEWLINE
    \draw_point_coord:nn { 10 * 3.5cm } { sqrt(2) }
  }

\TESTEXP { \draw_point_polar:nn }
  {
    \draw_point_polar:nn { 30 } { 1cm }
    \NEWLINE
    \draw_point_polar:nn { 30 } { 1cm ~ and ~ 2cm }
    \NEWLINE
    \draw_point_polar:nn { 15 + 15 } { 2 * 0.5cm ~ and ~ 2 * 1cm }
    \NEWLINE
  }

\TESTEXP { \draw_point_add:nn }
  {
    \draw_point_add:nn
      { \draw_point_vec_coord:nn { 0 } { 1 } }
      { \draw_point_vec_coord:nn { 2 } { 3 } }
    \NEWLINE
    \draw_point_add:nn { { 1cm } { 1cm } } { { 2cm } { 2cm } }
  }

\TESTEXP { \draw_point_diff:nn }
  {
    \draw_point_diff:nn
      { \draw_point_vec_coord:nn { 1 } { 1 } }
      { \draw_point_vec_coord:nn { 2 } { 3 } }
    \NEWLINE
    \draw_point_diff:nn { { 1cm } { 1cm } } { { 2cm } { 2cm } }
  }

\TESTEXP { \draw_point_scale:nn }
  {
    \draw_point_scale:nn { 2 }
      { \draw_point_vec_coord:nn { 0 } { 1 } }
    \NEWLINE
    \draw_point_scale:nn { 0.5 ^ 2 } { { 2cm } { 2cm } }
  }

\TESTEXP { \draw_point_intersect_lines:nnnn }
  {
    \draw_point_intersect_lines:nnnn
      { \draw_point_vec_coord:nn { 0 } { 1 } }
      { \draw_point_vec_coord:nn { 1 } { 0 } }
      { \draw_point_vec_coord:nn { 2 } { 2 } }
      { \draw_point_vec_coord:nn { 3 } { 4 } }
    \NEWLINE
    \draw_point_intersect_lines:nnnn
      { \draw_point_vec_coord:nn { 0 } { 0 } }
      { \draw_point_vec_coord:nn { 1 } { 1 } }
      { \draw_point_vec_coord:nn { 0 } { 1 } }
      { \draw_point_vec_coord:nn { sqrt(2) } { -sqrt(2) } }
  }

\TESTEXP { \draw_point_intersect_circles:nnnnn }
  {
    \draw_point_intersect_circles:nnnnn
      { \draw_point_vec_coord:nn { 0 } { 1 } }
      { 1cm }
      { \draw_point_vec_coord:nn { 1 } { 0 } }
      { 1cm }
      { 1 }
  }

\TEST { \draw_set_<axis>vec:n }
  {
    \exp_args:Nx \tl_show:n { \draw_point_vec_coord:nnn { 1 } { 1 } { 1 } }
    \draw_set_xvec:n { { 1cm } { 1cm } }
    \exp_args:Nx \tl_show:n { \draw_point_vec_coord:nnn { 1 } { 1 } { 1 } }
    \draw_set_yvec:n { { 1cm } { 1cm } }
    \exp_args:Nx \tl_show:n { \draw_point_vec_coord:nnn { 1 } { 1 } { 1 } }
    \draw_set_zvec:n { { 1cm } { 1cm } }
    \exp_args:Nx \tl_show:n { \draw_point_vec_coord:nnn { 1 } { 1 } { 1 } }
  }

\OMIT
  \draw_set_xvec:n { { 1cm } { 1cm } }
  \draw_set_yvec:n { { 0cm } { 1cm } }
\TIMO

\TESTEXP { \draw_point_vec_coord:nn }
  {
    \draw_point_vec_coord:nn { 0 } { 0 }
    \NEWLINE
    \draw_point_vec_coord:nn { 1 } { 0 }
    \NEWLINE
    \draw_point_vec_coord:nn { 1 } { 1 }
    \NEWLINE
    \draw_point_vec_coord:nn { 1 } { 0 }
  }

\OMIT
  \draw_set_xvec:n { { 1cm } { 0cm } }
  \draw_set_yvec:n { { 0cm } { 1cm } }
\TIMO

\TESTEXP { \draw_point_vec_coord:nnn }
  {
    \draw_point_vec_coord:nnn { 0 } { 0 } { 0 }
    \NEWLINE
    \draw_point_vec_coord:nnn { 0 } { 0 } { 1 }
    \NEWLINE
    \draw_point_vec_coord:nnn { 0 } { 1 } { 0 }
    \NEWLINE
    \draw_point_vec_coord:nnn { 0 } { 1 } { 1 }
  }

\TESTEXP { \draw_point_vec_polar:nn }
  {
    \draw_point_vec_polar:nn { 30 } { 2 }
    \NEWLINE
    \draw_point_vec_polar:nn { 30 } { 1~and~2 }
  }

\END
