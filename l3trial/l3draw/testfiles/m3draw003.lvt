%
% Copyright (C) 2018 The LaTeX3 Project
%

\documentclass{minimal}
\input{regression-test}

\RequirePackage[check-declarations]{expl3}
\ExplSyntaxOn
\debug_on:n { deprecation }
\ExplSyntaxOff

\AUTHOR{Joseph Wright}
\RequirePackage{l3draw}

\ExplSyntaxOn

\cs_set_protected:Npn \test:n #1
  {
    \hbox_set:Nn \l_tmpa_box
      {
        \draw_begin:
        #1
        \__draw_softpath_use_clear:
        \draw_end:
      }
    \box_show:N \l_tmpa_box
  }

\START

\TEST { \draw_path_moveto:n }
  {
    \test:n
      { \draw_path_moveto:n { 10pt , 10pt } }
  }

\TEST { \draw_path_lineto:n }
  {
    \test:n
      { \draw_path_lineto:n { 10pt , 10pt } }
  }

\TEST { \draw_path_curveto:nnn }
  {
    \test:n
      {
        \draw_path_curveto:nnn
          { \draw_point_vec:nn { 0 } { 1 } }
          { \draw_point_vec:nn { 1 } { 1 } }
          { \draw_point_vec:nn { 1 } { 2 } }
      }
  }

\TEST { \draw_path_close: }
  {
    \test:n
      {
        \draw_path_moveto:n { 0 , 0 }
        \draw_path_lineto:n { 1 , 0 }
        \draw_path_lineto:n { 1 , 1 }
        \draw_path_lineto:n { 0 , 1 }
        \draw_path_close:
      }
  }

\TEST { \draw_path_curveto:nnn }
  {
    \test:n
      {
        \draw_path_curveto:nn
          { \draw_point_vec:nn { 1 } { 1 } }
          { \draw_point_vec:nn { 1 } { 2 } }
      }
  }

\TEST { \draw_path_arc:nnn(n) }
  {
    \test:n
      {
        \draw_path_moveto:n { 0 , 0 }
        \draw_path_arc:nnn { 0 } { 90 } { 2cm }
      }
    \test:n
      {
        \draw_path_moveto:n { 0 , 0 }
        \draw_path_arc:nnn { 0 } { 180 } { 2cm }
      }
    \test:n
      {
        \draw_path_moveto:n { 0 , 0 }
        \draw_path_arc:nnn { 0 } { 220 } { 2cm }
      }
    \test:n
      {
        \draw_path_moveto:n { 0 , 0 }
        \draw_path_arc:nnn { 0 } { 360 } { 2cm }
      }
    \test:n
      {
        \draw_path_moveto:n { 0 , 0 }
        \draw_path_arc:nnn { 0 } { -90 } { 2cm }
      }
    \test:n
      {
        \draw_path_moveto:n { 0 , 0 }
        \draw_path_arc:nnn { 0 } { -180 } { 2cm }
      }
    \test:n
      {
        \draw_path_moveto:n { 0 , 0 }
        \draw_path_arc:nnn { 0 } { -270 } { 2cm }
      }
    \test:n
      {
        \draw_path_moveto:n { 0 , 0 }
        \draw_path_arc:nnn { 0 } { -360 } { 2cm }
      }
    \test:n
      {
        \draw_path_moveto:n { 0 , 0 }
        \draw_path_arc:nnnn { 0 } { 90 } { 1cm } { 2cm }
      }
  }

\END
